{
  "sdct-at-lambda-basic-execution-policy": {
    "policy_content": {
      "Statement": [
        {
          "Action": [
            "logs:CreateLogGroup",
            "logs:CreateLogStream",
            "logs:PutLogEvents",
            "dynamodb:GetItem",
            "dynamodb:Query",
            "dynamodb:PutItem",
            "dynamodb:Batch*",
            "dynamodb:DeleteItem",
            "ssm:PutParameter",
            "ssm:GetParameter",
            "kms:Decrypt",
            "dynamodb:GetRecords",
            "dynamodb:GetShardIterator",
            "dynamodb:DescribeStream",
            "dynamodb:ListStreams",
            "sts:AssumeRole"
          ],
          "Effect": "Allow",
          "Resource": "*"
        }
      ],
      "Version": "2012-10-17"
    },
    "resource_type": "iam_policy",
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test",
      "project-level-tag": "set-from-resource"
    }
  },
  "sdct-at-batch-job-role": {
    "resource_type": "iam_role",
    "predefined_policies": [
      "AmazonECS_FullAccess"
    ],
    "principal_service": "ecs-tasks",
    "custom_policies": [],
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-step-function-role": {
    "resource_type": "iam_role",
    "predefined_policies": [
      "AWSStepFunctionsReadOnlyAccess"
    ],
    "principal_service": "states",
    "custom_policies": [],
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },

  "sdct-at-compenv": {
    "resource_type": "batch_compenv",
    "compute_environment_type": "MANAGED",
    "state": "ENABLED",
    "compute_resources": {
      "type": "FARGATE",
      "maxv_cpus": 10,
      "instance_types": [],
      "security_group_ids": [
        "${sg_id}"
      ],
      "subnets": [
        "${subnet_id}"
      ]
    },
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-job-queue": {
    "resource_type": "batch_jobqueue",
    "state": "ENABLED",
    "priority": 100,
    "compute_environment_order": [
      {
        "order": 100,
        "compute_environment": "sdct-at-compenv"
      }
    ],
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-job-definition": {
    "resource_type": "batch_jobdef",
    "job_definition_name": "submit-definition",
    "job_definition_type": "container",
    "container_properties": {
      "image": "some_image",
      "vcpus": 1,
      "memory": 1024,
      "command": [
        "python"
      ],
      "environment": [
        {
          "name": "AWS_DEFAULT_REGION",
          "value": "${region}"
        }
      ],
      "readonly_root_filesystem": false,
      "job_role_arn": "sdct-at-batch-job-role"
    },
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-socket-api": {
    "resource_type": "web_socket_api_gateway",
    "route_selection_expression": "request.body.action",
    "deploy_stage": "api",
    "resources": {
      "$default": {
        "integration_type": "lambda",
        "enable_proxy": true,
        "lambda_name": "sdct-at-python-lambda"
      }
    },
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-step-function": {
    "resource_type": "step_functions",
    "definition": {
      "States": {
        "ExampleState": {
          "Type": "Succeed"
        }
      },
      "Comment": "A description of your state machine",
      "StartAt": "ExampleState"
    },
    "iam_role": "sdct-at-step-function-role",
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-cw-alarm": {
    "resource_type": "cloudwatch_alarm",
    "metric_name": "db_alarm",
    "namespace": "db",
    "period": 1200,
    "evaluation_periods": 1,
    "threshold": 1.0,
    "comparison_operator": "GreaterThanOrEqualToThreshold",
    "statistic": "SampleCount",
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-java-lambda-role": {
    "predefined_policies": [],
    "principal_service": "lambda",
    "custom_policies": [
      "sdct-at-lambda-basic-execution-policy"
    ],
    "resource_type": "iam_role",
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  },
  "sdct-at-cw-rule": {
    "resource_type": "cloudwatch_rule",
    "rule_type": "schedule",
    "expression": "rate(1 minute)",
    "tags": {
      "tests": "smoke",
      "project": "sdct-auto-test"
    }
  }
}